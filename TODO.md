# ✅ まちがいパトロール：開発用ToDoリスト（詳細版）

## 🔒 開発の進め方ルール（厳守）
1. 要件定義書とToDoリストは**各タスクの開始前に必ず確認**すること。
2. 各タスクが完了したら、**必ずテストとエラー解消**を行うこと。
3. 各タスク完了ごとに**ビルドしてエラーの有無を確認**すること。
4. エラーがすべて解消されたら、**ToDoリストに完了マークをつける**こと。
5. ToDoリストの改訂があった場合は、**必ず即時にGitHubへプッシュ**すること。
6. 開発は原則**ToDoリスト通りに進行**する（順序変更時は確認を取る）。
7. 途中で方針変更や仕様変更があった場合は、**即座に要件定義書とToDoリストを更新**すること。
8. 次の開発に進む前には**必ずレビュー・確認**を行うこと。

---

## 🛠 開発ToDoリスト（フェーズ順）

#### 📁 フェーズ0：初期環境構築
- [x] 開発環境の選定（Flutter or React Native or Expo）
- [x] Web対応の構成検討（PWA or SPA）
- [x] GitHubリポジトリ作成と初期ファイルpush
- [x] 基本画面構成のルーティング設定（ホーム／カメラ／結果）
- [x] UIフレームワーク・アニメーションライブラリ導入
- [x] 共通コンポーネント設計（Header／ボタン／画像ビュー）

#### 📷 フェーズ1：撮影・再撮影機能
- [x] 1枚目の画像撮影機能実装（カメラ起動 → 撮影 → 確認）
- [x] 1枚目の再撮影機能実装
- [x] 2枚目の画像撮影機能実装
- [x] 2枚目の再撮影機能実装
- [x] 撮影画像の一時保持ロジック作成
- [x] 撮影画像のリサイズ（最大横幅1080px）処理実装
- [x] カメラ画面とホーム画面の遷移確認・テスト

#### 🖼 フェーズ2：範囲指定・UI
- [ ] 1枚目画像に対する矩形範囲指定処理の実装（ドラッグで選択）
- [ ] 最小範囲サイズ制御（例：100x100px）追加
- [ ] 再タップ時の再指定処理追加
- [ ] 選択範囲の赤枠表示処理実装

#### 🎛 フェーズ3：感度スライダー
- [ ] 感度スライダーUIの設置（0〜100% または 3段階）
- [ ] 感度値を状態として保持
- [ ] 感度に応じたパラメータの内部処理設計

#### 🔍 フェーズ4：画像整列＆差分検出
- [ ] アライメント（特徴点検出→射影変換）処理組み込み
- [ ] 範囲指定領域の切り出し処理実装
- [ ] 差分画像生成ロジックの実装（絶対差分）
- [ ] 差分ノイズ除去（モルフォロジー）処理実装
- [ ] ラベリングと差分領域の抽出処理
- [ ] 感度設定のしきい値に応じたフィルタ処理実装

#### 🎞 フェーズ5：調査中アニメーション
- [ ] 画像交互ズーム表示アニメーション作成
- [ ] アニメーション中の「調査中…」UI表示
- [ ] 指定時間（例：3秒）後に自動で結果画面へ遷移

#### ✅ フェーズ6：結果表示
- [ ] 1枚目画像上に赤枠で差分を重ねる処理
- [ ] 重複しない赤枠表示と余白の調整処理
- [ ] 差分リストをアニメーションで順次表示
- [ ] アニメーション再生後も赤枠を残す

#### 📘 フェーズ7：使い方ガイド
- [ ] 「使い方を見る」ボタンのUI追加
- [ ] 使い方説明ページのデザイン作成（パトロボ案内）
- [ ] 各ステップに合わせた画像と説明テキスト配置

#### 🤖 フェーズ8：キャラクターUI
- [ ] パトロボの画像／アニメーション素材用意
- [ ] パトロボ吹き出しUIコンポーネント作成
- [ ] パトロボの登場箇所（使い方・調査中など）配置実装

#### 🧪 フェーズ9：テスト・レビュー
- [ ] 画面遷移テスト（全ページ）
- [ ] 範囲選択・感度調整テスト
- [ ] 差分検出精度テスト（Low/Medium/High 各モード）
- [ ] アニメーション表示確認
- [ ] UI/UXレビュー・改善

#### 🧹 フェーズ10：最終調整
- [ ] 不要デバッグコード削除
- [ ] すべてのエラー／警告解消
- [ ] ビルド＆動作確認（iOS / Android / Web）
- [ ] ToDoリスト最終完了マーク記入
- [ ] GitHubに最終版をプッシュ
